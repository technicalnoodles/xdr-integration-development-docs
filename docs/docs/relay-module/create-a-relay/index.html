<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-relay-module/create-a-relay" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Creating a Relay Module | Cisco XDR Integration Resources</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://technicalnoodles.github.io/xdr-integration-development-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://technicalnoodles.github.io/xdr-integration-development-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://technicalnoodles.github.io/xdr-integration-development-docs/docs/relay-module/create-a-relay"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating a Relay Module | Cisco XDR Integration Resources"><meta data-rh="true" name="description" content="To start off, we can create a relay module using one of Cisco XDR&#x27;s relay templates for Python, NodeJs, or Go. If these are not desireable, the module can be made in any other language as long it is able to receive and respond to API requests."><meta data-rh="true" property="og:description" content="To start off, we can create a relay module using one of Cisco XDR&#x27;s relay templates for Python, NodeJs, or Go. If these are not desireable, the module can be made in any other language as long it is able to receive and respond to API requests."><link data-rh="true" rel="icon" href="/xdr-integration-development-docs/img/cisco-logo-transparent.png"><link data-rh="true" rel="canonical" href="https://technicalnoodles.github.io/xdr-integration-development-docs/docs/relay-module/create-a-relay"><link data-rh="true" rel="alternate" href="https://technicalnoodles.github.io/xdr-integration-development-docs/docs/relay-module/create-a-relay" hreflang="en"><link data-rh="true" rel="alternate" href="https://technicalnoodles.github.io/xdr-integration-development-docs/docs/relay-module/create-a-relay" hreflang="x-default"><link rel="stylesheet" href="/xdr-integration-development-docs/assets/css/styles.2a03f2b3.css">
<script src="/xdr-integration-development-docs/assets/js/runtime~main.be9373e9.js" defer="defer"></script>
<script src="/xdr-integration-development-docs/assets/js/main.7d986a0d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/xdr-integration-development-docs/img/cisco-logo-transparent.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xdr-integration-development-docs/"><div class="navbar__logo"><img src="/xdr-integration-development-docs/img/cisco-logo-transparent.png" alt="Cisco Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/xdr-integration-development-docs/img/cisco-logo-transparent.png" alt="Cisco Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cisco XDR Integration Resources</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xdr-integration-development-docs/docs/intro">Integration Development</a><a class="navbar__item navbar__link" href="/xdr-integration-development-docs/api/response">Response API</a><a class="navbar__item navbar__link" href="/xdr-integration-development-docs/api/dashboard">Dashboard API</a><a class="navbar__item navbar__link" href="/xdr-integration-development-docs/api/private-intel">Private Intel API</a><a class="navbar__item navbar__link" href="/xdr-integration-development-docs/api/enrich">Enrich API</a></div><div class="navbar__items navbar__items--right"><a href="https://cisco.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xdr-integration-development-docs/docs/intro">XDR Development Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/xdr-integration-development-docs/docs/category/relay-module-development">Relay Module Development</a><button aria-label="Collapse sidebar category &#x27;Relay Module Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/create-a-relay">Creating a Relay Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/create-module-type">Creating a Module Type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/module-auth">Using Auth in a Module</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/xdr-integration-development-docs/docs/category/dashboard-tile-development">Dashboard Tile Development</a><button aria-label="Expand sidebar category &#x27;Dashboard Tile Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/xdr-integration-development-docs/docs/category/incident-feature-development">Incident Feature Development</a><button aria-label="Expand sidebar category &#x27;Incident Feature Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/xdr-integration-development-docs/docs/category/investigate-feature-development">Investigate Feature Development</a><button aria-label="Expand sidebar category &#x27;Investigate Feature Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/xdr-integration-development-docs/docs/category/automate-feature-development">Automate Feature Development</a><button aria-label="Expand sidebar category &#x27;Automate Feature Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/relay-assets">Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/relay-defintions">Adding the Module to XDR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xdr-integration-development-docs/docs/relay-module/relay-deployment">Deployment Options</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xdr-integration-development-docs/docs/resources">XDR Development Resources</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/xdr-integration-development-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/xdr-integration-development-docs/docs/category/relay-module-development"><span itemprop="name">Relay Module Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating a Relay Module</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating a Relay Module</h1></header>
<p>To start off, we can create a relay module using one of Cisco XDR&#x27;s relay templates for Python, NodeJs, or Go. If these are not desireable, the module can be made in any other language as long it is able to receive and respond to API requests.</p>
<p>For the rest of this guide, we will be using NodeJs as our preferred relay module programming language. We will be using VS Code as well for our IDE.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-dependencies">Install dependencies<a href="#install-dependencies" class="hash-link" aria-label="Direct link to Install dependencies" title="Direct link to Install dependencies">​</a></h2>
<p>If using Python, NodeJs, or Go, please install the required software to make sure code will run on your operating system.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clone-a-template">Clone a Template<a href="#clone-a-template" class="hash-link" aria-label="Direct link to Clone a Template" title="Direct link to Clone a Template">​</a></h2>
<p>Open a terminal and run this command <code>git clone &lt;repo_here&gt;</code></p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Need to add the github repos here</p></div></div>
<p>We now need to change into the directory of the template we just cloned. We should now be in the <code>node-express</code> directory. You may rename this to any other name you want, but this guide will use <code>node-express</code>. Now let us install all of the dependencies. Run <code>node i</code> in the terminal, that will install all the dependencies from the <code>package.json</code> file.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-explanation">Code Explanation<a href="#code-explanation" class="hash-link" aria-label="Direct link to Code Explanation" title="Direct link to Code Explanation">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-relay-module-locally">Test the Relay Module Locally<a href="#test-the-relay-module-locally" class="hash-link" aria-label="Direct link to Test the Relay Module Locally" title="Direct link to Test the Relay Module Locally">​</a></h2>
<p>Before we get to coding the entire module and then find out the basic functionality of actually running and responding doesn&#x27;t work, we want to first run the relay module locally. To do this with Node, we need to be in the <code>node-express</code> directory and in our terminal run the command <code>node index.js</code>. Based on the template, it will start a server on port 5000.</p>
<p><img decoding="async" loading="lazy" alt="server running" src="/xdr-integration-development-docs/assets/images/running-server-59fab7a0e186b67a69952c6e313ef333.png" width="868" height="90" class="img_ev3q"></p>
<p>Now we can do a test to check if the health check is working for the relay module. In another terminal window or tab, run <code>curl localhost:5000/health</code>. This should return a status ok and that means we have a running web server that responds to requests. But we need to know if XDR will be able to query it as well.</p>
<p><img decoding="async" loading="lazy" alt="ok status" src="/xdr-integration-development-docs/assets/images/ok-status-41764fcbf4fede0c0e5d1f87b7ec3315.png" width="1278" height="64" class="img_ev3q"></p>
<p>If you have the <code>jq</code> command installed, we can pipe the command into jq and get an easier to read version of the status. <code>curl localhost:5000/health | jq</code> This will be useful as we build the relay module.</p>
<p><img decoding="async" loading="lazy" alt="ok status" src="/xdr-integration-development-docs/assets/images/ok-status-jq-511baeb04b034793467e34f2c27b8fdf.png" width="1296" height="262" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-module-locally-from-xdr">Test the Module Locally (from XDR)<a href="#test-the-module-locally-from-xdr" class="hash-link" aria-label="Direct link to Test the Module Locally (from XDR)" title="Direct link to Test the Module Locally (from XDR)">​</a></h2>
<p>To test the module from our on-prem device (laptop, desktop or other internal development server), we will use ngrok to facilitate the connection between the local server and XDR.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>if you do not want to use ngrok, I would recommend developing the relay in a cloud provider with a public IP on the VM, or by port forwarding to your development server. Please do not leave either of these options constantly running because of security risks.</p></div></div>
<p>We must first get ngrok from this link: <a href="https://download.ngrok.com/" target="_blank" rel="noopener noreferrer">https://download.ngrok.com/</a></p>
<p>Then follow the instructions to get a ngrok auth token added to your profile. Then using the <em>Ephemeral Domain</em> option, run the command listed but change the port to 5000. It should look similar to this command <code>ngrok http http://localhost:5000</code>.</p>
<p>It should return a status page in your terminal:
<img decoding="async" loading="lazy" alt="ngrok status" src="/xdr-integration-development-docs/assets/images/ngrok-status-09b1d57e1d624be74c4850f47ced93aa.png" width="1822" height="404" class="img_ev3q"></p>
<p>Copy the <em>Forwarding</em> URL and store it somewhere easily accessible. Now, let us test that we can get to the relay module externally now.</p>
<p>Run <code>curl &lt;forwarding url&gt;/health | jq</code>
It should return the same status ok we got earlier when testing locally. This means we can get this working with XDR.
<img decoding="async" loading="lazy" alt="ngrok status ok" src="/xdr-integration-development-docs/assets/images/ngrok-status-ok-d80c429fe629689458a41e60405b6bbc.png" width="2020" height="260" class="img_ev3q"></p>
<p>Since the ngrok tunnel is working, we need to log into XDR and go to the Integrations section. To do this, go to <code>Administration -&gt; Integrations</code>.</p>
<p><img decoding="async" loading="lazy" alt="integrations" src="/xdr-integration-development-docs/assets/images/xdr-integrations-0ae924d56ae05f8dcf3a041d323ae3c8.png" width="792" height="1068" class="img_ev3q"></p>
<p>Then go to <code>Third Party Integrations</code>.</p>
<p><img decoding="async" loading="lazy" alt="third party integrations" src="/xdr-integration-development-docs/assets/images/third-party-55408186ea6f8ed436cb330d27036994.png" width="624" height="620" class="img_ev3q"></p>
<p>Once there, scroll down until you find the <code>Generic Serverless Relay</code>.</p>
<p><img decoding="async" loading="lazy" alt="generic relay" src="/xdr-integration-development-docs/assets/images/generic-relay-435e87a03a21ca9e504fafa4e0eddea4.png" width="802" height="570" class="img_ev3q"></p>
<p>Click on the <em>+</em> sign to add this to your XDR account.</p>
<p>It should bring up a new page where we can setup the relay.</p>
<p><img decoding="async" loading="lazy" alt="relay settings" src="/xdr-integration-development-docs/assets/images/relay-settings-57a0252fadf21eea3fe34e4801485a63.png" width="3232" height="1500" class="img_ev3q"></p>
<p>For this guide, we will use <em>Wazuh</em> an Opensource XDR as the our integration. You may use any that want, but to be able to follow along step by step, we recommend using <em>Wazuh</em> as well.</p>
<p>In the <em>Integration Name</em> field, input <em>Wazuh</em>.</p>
<p>In the <em>URL</em> field, enter the ngrok <em>Forwarder</em> URL with nothing at the end of it.</p>
<p>In the <em>Bearer</em> field, you may enter whatever you want. We will not be using one at the moment.</p>
<p>Your relay settings should look similar to the below:</p>
<p><img decoding="async" loading="lazy" alt="relay settings" src="/xdr-integration-development-docs/assets/images/wazuh-generic-small-ef858843fd4d67a2b6e6f4b35930cda7.png" width="1482" height="882" class="img_ev3q"></p>
<p>Before we click on <em>Add</em>, we need change the health check from a GET to a POST. Go to the <code>routes -&gt; health</code> directory. Open the <code>healthRoute.js</code> file. It should look like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/health&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We need to change the GET type to a POST. Replace <code>get</code> with <code>post</code>. It should now lok like the below:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/health&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Save this file and then restart the Node server by using CTRL + C then running it with <code>node index.js</code>.</p>
<p>Now that we have done that, we can click on <em>Add</em>.</p>
<p>You should get a connected message.</p>
<p><img decoding="async" loading="lazy" alt="relay settings" src="/xdr-integration-development-docs/assets/images/wazuh-connected-161a5cde3a0901c19764f63a1f504fc7.png" width="1488" height="350" class="img_ev3q"></p>
<p>With this, we have finished making sure the module is running and accessible and that XDR can connect to it.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This is a quick way get an integration connected to Cisco XDR for development. But it will not have everything that can be done with a relay module. As an example, if your product is able to provide value to the XDR Dashboard area, then we will need to create a <strong>module type</strong> that enables the <em>tile</em> functionality.</p></div></div>
<p>Next, we will create a <strong>module type</strong>. This is the official way to add an integration to Cisco XDR and it is how your product will be shown within the Cisco XDR Integrations page.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/xdr-integration-development-docs/docs/category/relay-module-development"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Relay Module Development</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/xdr-integration-development-docs/docs/relay-module/create-module-type"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating a Module Type</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install-dependencies" class="table-of-contents__link toc-highlight">Install dependencies</a></li><li><a href="#clone-a-template" class="table-of-contents__link toc-highlight">Clone a Template</a></li><li><a href="#code-explanation" class="table-of-contents__link toc-highlight">Code Explanation</a></li><li><a href="#test-the-relay-module-locally" class="table-of-contents__link toc-highlight">Test the Relay Module Locally</a></li><li><a href="#test-the-module-locally-from-xdr" class="table-of-contents__link toc-highlight">Test the Module Locally (from XDR)</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Cisco Systems.</div></div></div></footer></div>
</body>
</html>